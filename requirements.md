# Requirements Document

## Introduction

日記を書いて、AI（GPT-4.1 mini）による振り返り機能を持つローカルアプリケーションです。日々の記録を蓄積し、週・月・年・任意期間での振り返り分析を通じて、ユーザーの成長や変化を可視化することを目的としています。日記データはローカルにテキストファイルとして保存され、プライバシーを保護しながら長期的な自己分析を可能にします。

## Requirements

### Requirement 1

**User Story:** ユーザーとして、毎日の出来事や思考を簡単に記録したい。そうすることで、日々の体験を蓄積し後で振り返ることができる。

#### Acceptance Criteria

1. WHEN ユーザーがアプリを起動 THEN システムは日記入力画面を表示する
2. WHEN ユーザーが日記を入力 THEN システムは最大500文字（日本語）まで入力を受け付ける
3. WHEN ユーザーが日記を保存 THEN システムは現在の日付でローカルにテキストファイルとして保存する
4. WHEN ユーザーが過去の日記を確認したい THEN システムは日付を指定して過去の日記を表示できる

### Requirement 2

**User Story:** ユーザーとして、週単位で自分の日記を振り返りたい。そうすることで、1週間の活動や感情の変化を把握できる。

#### Acceptance Criteria

1. WHEN ユーザーが「今週を振り返る」ボタンを押下 THEN システムは今週の日記データを収集する
2. WHEN 今週の日記データが収集される THEN システムはOpenAI GPT-4.1 miniに分析を依頼する
3. WHEN AI分析が完了 THEN システムは週の振り返りサマリーを表示する
4. IF 今週の日記データが存在しない THEN システムは「振り返るデータがありません」と表示する

### Requirement 3

**User Story:** ユーザーとして、月単位で自分の日記を振り返りたい。そうすることで、1ヶ月の成長や変化を確認できる。

#### Acceptance Criteria

1. WHEN ユーザーが「今月を振り返る」ボタンを押下 THEN システムは今月の日記データを収集する
2. WHEN 今月の日記データが収集される THEN システムはOpenAI GPT-4.1 miniに分析を依頼する
3. WHEN AI分析が完了 THEN システムは月の振り返りサマリーを表示する
4. IF 今月の日記データが存在しない THEN システムは「振り返るデータがありません」と表示する

### Requirement 4

**User Story:** ユーザーとして、年単位で自分の日記を振り返りたい。そうすることで、1年間の大きな変化や成長を把握できる。

#### Acceptance Criteria

1. WHEN ユーザーが「今年を振り返る」ボタンを押下 THEN システムは今年の日記データを収集する
2. WHEN 今年の日記データが収集される THEN システムはOpenAI GPT-4.1 miniに分析を依頼する
3. WHEN AI分析が完了 THEN システムは年の振り返りサマリーを表示する
4. IF 今年の日記データが存在しない THEN システムは「振り返るデータがありません」と表示する

### Requirement 5

**User Story:** ユーザーとして、任意の期間で日記を振り返りたい。そうすることで、特定のプロジェクトや出来事の期間を分析できる。

#### Acceptance Criteria

1. WHEN ユーザーが「任意の期間を振り返る」ボタンを押下 THEN システムは開始日と終了日の入力フィールドを表示する
2. WHEN ユーザーが日付範囲を入力して実行 THEN システムは指定期間の日記データを収集する
3. WHEN 指定期間の日記データが収集される THEN システムはOpenAI GPT-4.1 miniに分析を依頼する
4. WHEN AI分析が完了 THEN システムは指定期間の振り返りサマリーを表示する
5. IF 指定期間に日記データが存在しない THEN システムは「振り返るデータがありません」と表示する

### Requirement 6

**User Story:** ユーザーとして、日記データを安全にローカルに保存したい。そうすることで、プライバシーを保護しながら長期的にデータを蓄積できる。

#### Acceptance Criteria

1. WHEN ユーザーが日記を保存 THEN システムはローカルディスクにテキストファイル形式で保存する
2. WHEN 日記ファイルを保存 THEN システムは日付ベースのファイル名（例：2024-01-15.txt）を使用する
3. WHEN アプリが起動 THEN システムは専用の日記フォルダを作成または確認する
4. WHEN 日記データにアクセス THEN システムはローカルファイルシステムからのみデータを読み取る

### Requirement 7

**User Story:** ユーザーとして、使いやすいGUIアプリケーションで日記を書きたい。そうすることで、直感的で快適な環境で日記を継続できる。

#### Acceptance Criteria

1. WHEN ユーザーがアプリを起動 THEN システムはGUIウィンドウを表示する
2. WHEN アプリが起動 THEN システムは日記入力用のテキストエリアと振り返りボタンを含む直感的なインターフェースを提供する
3. WHEN ユーザーがアプリを終了したい THEN システムは適切な終了方法（ウィンドウクローズボタンなど）を提供する
4. WHEN システムエラーが発生 THEN システムは分かりやすいエラーダイアログを表示する
5. WHEN ユーザーが日記を入力 THEN システムはリアルタイムで文字数カウントを表示する

### Requirement 8

**User Story:** ユーザーとして、OpenAI APIを使用してAI分析を受けたい。そうすることで、客観的で洞察に富んだ振り返りを得られる。

#### Acceptance Criteria

1. WHEN システムがAI分析を実行 THEN システムはOpenAI GPT-4.1 mini APIを呼び出す
2. WHEN API呼び出しが成功 THEN システムは分析結果をユーザーに表示する
3. IF API呼び出しが失敗 THEN システムは「AI分析に失敗しました」とエラーメッセージを表示する
4. WHEN APIキーが設定されていない THEN システムは設定画面への案内を表示する
5. WHEN AI分析を実行 THEN システムは日記の内容、感情の変化、行動パターン、成長ポイントを分析する

### Requirement 9

**User Story:** ユーザーとして、アプリの設定を管理したい。そうすることで、OpenAI APIキーを安全に設定し、アプリを自分の環境に合わせてカスタマイズできる。

#### Acceptance Criteria

1. WHEN ユーザーが設定画面を開く THEN システムは設定ダイアログまたは設定ウィンドウを表示する
2. WHEN ユーザーがOpenAI APIキーを入力 THEN システムは入力されたAPIキーをローカルに安全に保存する
3. WHEN ユーザーがAPIキーを保存 THEN システムは接続テストを実行してAPIキーの有効性を確認する
4. IF APIキーが無効 THEN システムは「APIキーが無効です」とエラーメッセージを表示する
5. WHEN APIキーが有効 THEN システムは「設定が保存されました」と成功メッセージを表示する
6. WHEN ユーザーが設定画面にアクセス THEN システムはメニューバーまたはボタンから設定画面へのアクセス方法を提供する